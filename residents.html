<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anubis Underground</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="Media/Logo/logo.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="Media/Logo/logo.png">
  <script src="clean-urls.js"></script>
</head>
<body>

  <div class="navbar">
    <a class="logo" href="home.html">
      <!-- fixed slashes -->
      <img src="Media/Logo/logo.png" alt="Logo">
    </a>

    <!-- Social icons container (Instagram + Facebook + TikTok) -->
    <div class="socials" aria-hidden="false">
      <a class="social-icon" href="https://www.instagram.com/anubisunderground/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
        <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true">
          <title>Instagram</title>
          <path fill="currentColor" d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/>
        </svg>
      </a>
      <a class="social-icon" href="https://www.facebook.com/AnubisUnderground/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" aria-hidden="true">
          <title>Facebook</title>
          <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"/>
        </svg>
      </a>
      <a class="social-icon" href="https://www.tiktok.com/@anubisunderground" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
        <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true">
          <title>TikTok</title>
          <path fill="currentColor" d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
        </svg>
      </a>
    </div>

    <!-- Hamburger button -->
    <div class="menu-toggle" id="menu-toggle">â˜°</div>

    <!-- Navigation menu -->
    <div class="menu" id="menu">
      <a href="events.html">EVENTS</a>

      <div class="dropdown">
        <button class="dropbtn">MUSIC â–¾</button>
        <div class="dropdown-content">
          <a href="https://anubisrecords1.bandcamp.com/" target="_blank" rel="noopener noreferrer">BANDCAMP</a>
          <a href="https://soundcloud.com/anubis_records" target="_blank" rel="noopener noreferrer">SOUNDCLOUD</a>
          <a href="submission.html">SUBMISSION</a>
        </div>
      </div>

      <a href="residents.html">RESIDENTS</a>

      <!-- center logo for desktop only -->
      <a class="logo-inline" href="home.html">
        <img class="logo-img default" src="Media/Logo/logo.png" alt="Logo">
        <img class="logo-img hover" src="Media/Logo/logored.png" alt="Logo (red)">
      </a>

      <a href="gallery.html">GALLERY</a>
      <a href="https://anubisrecords1.bandcamp.com/merch" target="_blank" rel="noopener noreferrer">MERCH</a>

      <div class="dropdown">
        <button class="dropbtn">CONTACTS â–¾</button>
        <div class="dropdown-content">
          <a href="about.html">ABOUT US</a>
          <a href="rules.html">HOUSE RULES</a>
          <a href="faq.html">FAQ</a>
        </div>
      </div>
    </div>

    <!-- overlay that covers the page content when mobile menu is open; click it to close -->
    <div id="overlay" class="overlay" aria-hidden="true"></div>
  </div>

  <script>
    const toggle = document.getElementById('menu-toggle');
    const menu = document.getElementById('menu');
    const overlay = document.getElementById('overlay');

    function openMenu() {
      menu.classList.add('active');
      overlay.classList.add('active');
      overlay.setAttribute('aria-hidden', 'false');
      toggle.textContent = 'âœ•';
    }
    function closeMenu() {
      menu.classList.remove('active');
      overlay.classList.remove('active');
      overlay.setAttribute('aria-hidden', 'true');
      toggle.textContent = 'â˜°';
      collapseAllSubmenus();
    }

    toggle.addEventListener('click', () => {
      if (menu.classList.contains('active')) closeMenu();
      else openMenu();
    });

    overlay.addEventListener('click', closeMenu);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menu.classList.contains('active')) closeMenu();
    });


    // Close menu when tapping/clicking outside it (mobile)
    function outsideMenuHandler(e) {
      if (!isMobileMenu()) return;
      if (!menu.classList.contains('active')) return;
      const clickedOutside = !menu.contains(e.target) && !toggle.contains(e.target);
      if (clickedOutside) closeMenu();
    }
    document.addEventListener('click', outsideMenuHandler);
    document.addEventListener('touchstart', outsideMenuHandler, { passive: true });

    // Mobile dropdown toggle (accordion with slide animation)
    const isMobileMenu = () =>
      window.matchMedia('(max-width: 700px), (max-height: 500px) and (max-width: 1000px)').matches;

    function collapseAllSubmenus() {
      document.querySelectorAll('.menu .dropdown').forEach(dd => {
        dd.classList.remove('open');
        const panel = dd.querySelector('.dropdown-content');
        const btn = dd.querySelector('.dropbtn');
        if (btn) btn.setAttribute('aria-expanded', 'false');
        if (panel) {
          panel.style.maxHeight = '0px';
          panel.style.opacity = '0';
        }
      });
    }

    // prepare dropdowns
    document.querySelectorAll('.dropdown .dropbtn').forEach(btn => {
      const dd = btn.closest('.dropdown');
      const panel = dd.querySelector('.dropdown-content');
      btn.setAttribute('aria-expanded', 'false');

      btn.addEventListener('click', (e) => {
        if (!isMobileMenu()) return; // desktop uses hover
        e.preventDefault();
        e.stopPropagation();

        const willOpen = !dd.classList.contains('open');
        dd.classList.toggle('open', willOpen);
        btn.setAttribute('aria-expanded', willOpen ? 'true' : 'false');

        if (panel) {
          if (willOpen) {
            panel.style.maxHeight = panel.scrollHeight + 'px';
            panel.style.opacity = '1';
          } else {
            panel.style.maxHeight = '0px';
            panel.style.opacity = '0';
          }
        }
      });
    });

    // clear inline styles when switching to desktop
    function syncDropdownMode() {
      if (!isMobileMenu()) {
        document.querySelectorAll('.menu .dropdown-content').forEach(panel => {
          panel.style.maxHeight = '';
          panel.style.opacity = '';
        });
        document.querySelectorAll('.menu .dropdown').forEach(dd => dd.classList.remove('open'));
        document.querySelectorAll('.dropdown .dropbtn').forEach(b => b.setAttribute('aria-expanded','false'));
      }
    }
    window.addEventListener('resize', syncDropdownMode);
    syncDropdownMode();
  </script>

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-bg"></div>
    <div class="hero-content">
      <div class="hero-logo">
        <img class="hero-logo-img" src="Media/Logo/logo.png" alt="Anubis Underground Logo">
      </div>
      <h1 class="hero-title">ANUBIS <span class="text-accent">RESIDENTS</span></h1>
      <p class="hero-subtitle">Meet Our Artists</p>
      <p class="hero-tagline">The DJs, producers and residents who perform at Anubis Underground</p>
      <div class="hero-divider"></div>
    </div>
  </section>

  <!-- Main Content -->
  <main class="content">
    <section class="section-header">
      <h2 class="section-title">OUR <span class="text-accent">RESIDENTS</span></h2>
      <p class="section-subtitle"><strong>Tap the picture to check the bio and swipe through multiple slides</strong></p>
    </section>

    <section class="residents-grid" aria-label="Anubis residents gallery">
      <div class="resident">
        <img src="Media/Residents/kosowsky.jpeg" alt="Kosowsky">
        <p class="resident-name">Kosowsky</p>
      </div>
      <div class="resident">
        <img src="Media/Residents/kunja.jpg" alt="Kunja">
        <p class="resident-name">Kunja</p>
      </div>
      <div class="resident">
        <img src="Media/Residents/kayn.jpg" alt="Kayn">
        <p class="resident-name">Kayn</p>
      </div>
      <div class="resident">
        <img src="Media/Residents/nazh.jpeg" alt="Nazh">
        <p class="resident-name">Nazh</p>
      </div>
      <div class="resident">
        <img src="Media/Residents/bahun.png" alt="Bahun">
        <p class="resident-name">Bahun</p>
      </div>
      <div class="resident">
        <img src="Media/Residents/vanch.jpg" alt="Vanch">
        <p class="resident-name">Vanch</p>
      </div>
    </section>

    <!-- Booking Section -->
    <section class="featured-section">
      <div class="section-header">
        <h2 class="section-title">BOOK <span class="text-accent">OUR ARTISTS</span></h2>
        <p class="section-subtitle">Ready to bring the Anubis Underground experience to your event?</p>
      </div>
      
      <div class="booking-card-wrapper">
        <div class="booking-intro-card">
          <div class="booking-intro-content">
            <h3>Professional Booking Services</h3>
            <p>Our residents are available for bookings worldwide. Each artist brings their unique style and energy to create unforgettable underground experiences.</p>
            <div class="booking-features">
              <div class="feature-item">
                <span class="feature-icon">ðŸ”¥</span>
                <span>Underground Experience</span>
              </div>
              <div class="feature-item">
                <span class="feature-icon">âš¡</span>
                <span>High-Energy Performances</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="contact-form-section">
        <form
          id="booking-form"
          action="https://formspree.io/f/mvgvzrye"
          method="POST"
        >
          <!-- Row 1: Name and Email -->
          <div class="form-row">
            <div class="form-field">
              <label>
                Your name: <span class="required">*</span>
                <input type="text" name="name" placeholder="Enter your name" required>
              </label>
            </div>
            <div class="form-field">
              <label>
                Your email: <span class="required">*</span>
                <input type="email" name="email" placeholder="Enter your email" required>
              </label>
            </div>
          </div>

          <!-- Row 2: Event Name and Location -->
          <div class="form-row">
            <div class="form-field">
              <label>
                Name of event: <span class="required">*</span>
                <input type="text" name="event_name" placeholder="Enter event name" required>
              </label>
            </div>
            <div class="form-field">
              <label>
                Location: <span class="required">*</span>
                <input type="text" name="location" placeholder="Enter event location" required>
              </label>
            </div>
          </div>

          <!-- Row 3: Country and Date -->
          <div class="form-row">
            <div class="form-field">
              <label>
                Country: <span class="required">*</span>
                <input type="text" name="country" placeholder="Enter country" required>
              </label>
            </div>
            <div class="form-field">
              <label>
                Date for booking: <span class="required">*</span>
                <input type="date" name="booking_date" required>
              </label>
            </div>
          </div>

          <label>
            Select artist(s) to book: <span class="required">*</span>
          </label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="kosowsky" name="artist" value="Kosowsky">
              <label for="kosowsky">Kosowsky</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="kunja" name="artist" value="Kunja">
              <label for="kunja">Kunja</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="kayn" name="artist" value="Kayn">
              <label for="kayn">Kayn</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="nazh" name="artist" value="Nazh">
              <label for="nazh">Nazh</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="bahun" name="artist" value="Bahun">
              <label for="bahun">Bahun</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="vanch" name="artist" value="Vanch">
              <label for="vanch">Vanch</label>
            </div>
          </div>
          <label>
            Additional message:
            <textarea name="message" placeholder="Any additional details or requirements..."></textarea>
          </label>
          <button type="submit" id="booking-submit">Send Booking Request</button>
        </form>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Copyright 2025 Â© All rights Reserved. Design by Anubis Underground</p>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const bios = {
        Kosowsky: [
          'Kosowsky is a DJ, producer, and the founder of Anubis Underground, based in Ljubljana, Slovenia. Known for his diverse and powerful sets, he blends all shades of hard techno into a relentless mix that defines the core energy of the label.',
          'With years of experience in the underground scene, Kosowsky has shaped the sound and vision of Anubis Underground since its inception.',
          'His production style merges industrial textures with driving rhythms, creating tracks that resonate deeply with the techno community.'
        ],
        Kunja: [
          'KUNJA is a young yet experienced artist who blends the driving rhythms of Hard Groove, Schranz, Hard Techno, and Industrial into an unforgettable musical journey. His sets are known for their energy, refined track selection, and deep connection with the crowd.',
          'Playing on 3 to 4 channels, he creates layered and dynamic performances that keep the energy flowing. With his unique sonic signature, he has already performed across various clubs in Slovenia and the region, always ensuring a packed dance floor.',
          'With a sharp sense for reading the vibe of the room, KUNJA is not just a performer but a true atmosphere creator â€“ whether itâ€™s an underground event or a major festival stage. His mission is clear: to turn every performance into an experience that lingers with the audience long after the last beat.'
        ],
        Bahun: [
          'Bahun is a DJ from TrÅ¾iÄ, Slovenia, delivering fast and unforgiving schranz infused with a taste of every genre. His rare spark of vitality turns every set into a storm of rhythm and raw euphoria, where intensity meets groove and the crowd moves as one.',
          'Bahun\'s eclectic approach brings unexpected energy to every performance, making each set a unique journey.',
          'His passion for pushing boundaries has earned him recognition in the underground techno community.'
        ],
        Kayn: [
          'Kayn is a DJ from Postojna, Slovenia, known for delivering intense hard industrial techno sets that shake the dancefloor with raw power and precision. His sound captures the darker essence of hard techno, where relentless rhythm meets pure energy.',
          'Drawing inspiration from the industrial underground, Kayn crafts sets that are both punishing and hypnotic.',
          'His commitment to the darker side of techno makes him a standout in the Anubis roster.'
        ],
        Nazh: [
          'Nazh is a DJ from Ljubljana, Slovenia, bringing unstoppable energy to every set with his powerful schranz sound. Known for fast-paced, hard-hitting rhythms, he drives the crowd into motion with precision and intensity, creating an atmosphere where raw energy and pure rave spirit collide on the dancefloor.',
          'Nazh\'s high-octane performances are characterized by seamless mixing and relentless energy that keeps crowds moving.',
          'His passion for schranz and hard techno has made him a resident favorite at Anubis events.'
        ],
        Vanch: [
          'Vanch is a DJ and producer from Borovnica, Slovenia, known for his dark and unrelenting fusion of bochka and pure industrial. His sets dive deep into the mechanical void, merging distortion and rhythm into a relentless force that consumes the dancefloor in raw intensity.',
          'Vanch\'s sound design explores the boundaries between noise and rhythm, creating immersive sonic experiences.',
          'His innovative approach to production has positioned him as one of the most exciting talents in the industrial techno scene.'
        ],
      };

      const instagram = {
        Kosowsky: 'https://www.instagram.com/kosowsky666/',
        Kunja: 'https://www.instagram.com/kunjaa_official/',
        Bahun: 'https://www.instagram.com/rokbahun/',
        Kayn: 'https://www.instagram.com/kayn_musicc/',
        Nazh: 'https://www.instagram.com/nazh.209/',
        Vanch: 'https://www.instagram.com/vanch.wav/',
      };
      const soundcloud = {
        Kosowsky: 'https://soundcloud.com/jan-kosec',
        Kunja: 'https://soundcloud.com/kunja-og',
        Bahun: 'https://soundcloud.com/rok-bahun',
        Kayn: 'https://soundcloud.com/kayn_musicc',
        Nazh: 'https://soundcloud.com/nazh_209',
        Vanch: 'https://soundcloud.com/vanch999',
      };
      const tiktok = {
        Kayn: 'https://www.tiktok.com/@kayn_musicc',
        Kosowsky: 'https://www.tiktok.com/@kosi286',
        Kunja: 'https://www.tiktok.com/@kunjaofficiale',
      };

      document.querySelectorAll('.residents-grid .resident').forEach(card => {
        const nameEl = card.querySelector('.resident-name');
        const name = (nameEl?.textContent || 'Resident').trim();

        const overlay = document.createElement('div');
        overlay.className = 'resident-overlay';
        overlay.setAttribute('aria-hidden', 'true');

        const bioSlides = bios[name] || [name];
        const ig = instagram[name] || '#';
        const sc = soundcloud[name] || '#';
        const tk = tiktok[name];

        // Build slides HTML
        const slidesHTML = bioSlides.map((text, idx) => `
          <div class="bio-slide ${idx === 0 ? 'active' : ''}" data-slide="${idx}">
            <p>${text}</p>
          </div>
        `).join('');

        // Build dots HTML
        const dotsHTML = bioSlides.length > 1 ? `
          <div class="bio-dots">
            ${bioSlides.map((_, idx) => `
              <button class="bio-dot ${idx === 0 ? 'active' : ''}" data-slide="${idx}" aria-label="Slide ${idx + 1}"></button>
            `).join('')}
          </div>
        ` : '';

        overlay.innerHTML = `
          <div class="overlay-content">
            <h3>${name}</h3>
            <div class="bio-slider">
              <div class="bio-slides">
                ${slidesHTML}
              </div>
              ${dotsHTML}
            </div>
            <div class="resident-socials">
              <a class="resident-social-icon" href="${ig}" target="_blank" rel="noopener noreferrer" aria-label="Instagram ${name}">
                <svg role="img" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                  <path fill="currentColor" d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/>
                </svg>
              </a>
              <a class="resident-social-icon" href="${sc}" target="_blank" rel="noopener noreferrer" aria-label="SoundCloud ${name}">
                <svg role="img" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                  <path fill="currentColor" d="M20.771 10.671a3.474 3.474 0 0 0-1.49.327 5.8 5.8 0 0 0-5.4-4.228 5.73 5.73 0 0 0-3.317 1.09 4.9 4.9 0 0 0-2.081 3.99v6.787h12.288a3.477 3.477 0 0 0 0-6.996zM6.465 10.315a.736.736 0 0 0-.736.736v6.139a.736.736 0 0 0 1.471 0v-6.139a.736.736 0 0 0-.735-.736zm-2.206.736a.736.736 0 0 0-1.471 0v6.139a.736.736 0 1 0 1.471 0z"/>
                </svg>
              </a>
              ${tk ? `
              <a class="resident-social-icon" href="${tk}" target="_blank" rel="noopener noreferrer" aria-label="TikTok ${name}">
                <svg role="img" viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
                  <path fill="currentColor" d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                </svg>
              </a>` : ''}
            </div>
          </div>
        `;

        const img = card.querySelector('img');
        if (!img) return;
        card.insertBefore(overlay, img.nextSibling);

        // Handle dot navigation
        const dots = overlay.querySelectorAll('.bio-dot');
        const slides = overlay.querySelectorAll('.bio-slide');

        let currentIndex = Array.from(slides).findIndex(s => s.classList.contains('active'));
        if (currentIndex < 0) currentIndex = 0;

        const goTo = (i) => {
          if (i === currentIndex || i < 0 || i >= slides.length) return;
          slides[currentIndex].classList.remove('active');
          dots[currentIndex]?.classList.remove('active');
          slides[i].classList.add('active');
          dots[i]?.classList.add('active');
          currentIndex = i;
        };

        dots.forEach(dot => {
          dot.addEventListener('click', (e) => {
            e.stopPropagation();
            const slideIndex = parseInt(dot.getAttribute('data-slide'));
            goTo(slideIndex);
          });
        });

        // Swipe navigation (touch/pointer)
        const slidesEl = overlay.querySelector('.bio-slides');
        const threshold = 40; // px required to trigger a swipe

        let startX = 0, startY = 0, dx = 0, dy = 0, activeDrag = false, lockedAxis = null;

        const getXY = (e) => {
          if (e.touches && e.touches[0]) return { x: e.touches[0].clientX, y: e.touches[0].clientY };
          return { x: e.clientX, y: e.clientY };
        };

        const onPointerDown = (e) => {
          activeDrag = true;
          lockedAxis = null;
          const p = getXY(e);
          startX = p.x; startY = p.y; dx = 0; dy = 0;
          slidesEl.setPointerCapture?.(e.pointerId);
          e.stopPropagation();
        };

        const onPointerMove = (e) => {
          if (!activeDrag) return;
          const p = getXY(e);
          dx = p.x - startX;
          dy = p.y - startY;

          // Lock to horizontal if movement is mostly horizontal
          if (!lockedAxis && (Math.abs(dx) > 10 || Math.abs(dy) > 10)) {
            lockedAxis = Math.abs(dx) > Math.abs(dy) ? 'x' : 'y';
          }

          // If horizontal gesture, prevent scrolling the page
          if (lockedAxis === 'x') e.preventDefault();
        };

        const onPointerUp = (e) => {
          if (!activeDrag) return;
          activeDrag = false;

          if (lockedAxis === 'x' && Math.abs(dx) > threshold) {
            if (dx < 0) {
              // swipe left -> next
              goTo(Math.min(currentIndex + 1, slides.length - 1));
            } else {
              // swipe right -> prev
              goTo(Math.max(currentIndex - 1, 0));
            }
          }

          dx = dy = 0;
          lockedAxis = null;
          e.stopPropagation();
        };

        if (window.PointerEvent) {
          slidesEl.addEventListener('pointerdown', onPointerDown);
          slidesEl.addEventListener('pointermove', onPointerMove, { passive: false });
          slidesEl.addEventListener('pointerup', onPointerUp);
          slidesEl.addEventListener('pointercancel', onPointerUp);
        } else {
          // Fallback for older browsers
          slidesEl.addEventListener('touchstart', onPointerDown, { passive: true });
          slidesEl.addEventListener('touchmove', onPointerMove, { passive: false });
          slidesEl.addEventListener('touchend', onPointerUp);
          slidesEl.addEventListener('touchcancel', onPointerUp);
        }

        overlay.addEventListener('click', (e) => {
          e.stopPropagation();
          const flipped = card.classList.toggle('flipped');
          card.setAttribute('aria-pressed', flipped ? 'true' : 'false');
        });

        card.setAttribute('role', 'button');
        card.setAttribute('tabindex', '0');
        card.setAttribute('aria-pressed', 'false');

        const toggle = () => {
          const flipped = card.classList.toggle('flipped');
          card.setAttribute('aria-pressed', flipped ? 'true' : 'false');
        };

        card.addEventListener('click', toggle);
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            toggle();
          }
        });
      });
    });
  </script>
  <script>
    // Booking form: intercept submit, send via fetch, prevent redirect,
    // show success state, clear fields after 2s, then restore button.
    (function () {
      const form = document.getElementById('booking-form');
      const submitBtn = document.getElementById('booking-submit');
      if (!form || !submitBtn) return;

      const originalText = submitBtn.textContent;
      const originalStyle = {
        background: submitBtn.style.backgroundColor || '',
        color: submitBtn.style.color || '',
      };

      function setButtonState(text, bg, color) {
        submitBtn.textContent = text;
        if (bg !== null) submitBtn.style.backgroundColor = bg;
        if (color !== null) submitBtn.style.color = color;
      }

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        // prevent double submits
        if (submitBtn.disabled) return;
        submitBtn.disabled = true;

        // show sending state
        setButtonState('Sending...', '#6c757d', '#fff');

        const fd = new FormData(form);

        try {
          // POST to the form action (Formspree)
          const resp = await fetch(form.action, {
            method: form.method || 'POST',
            body: fd,
            headers: {
              'Accept': 'application/json'
            }
          });

          if (resp.ok) {
            // success UI
            setButtonState('Booking submitted', '#28a745', '#fff');

            // clear fields after 2 seconds
            setTimeout(() => {
              // Clear inputs, textareas, checkboxes
              form.querySelectorAll('input, textarea').forEach(inp => {
                if (inp.type === 'checkbox' || inp.type === 'radio') inp.checked = false;
                else if (inp.type === 'date' || inp.type === 'text' || inp.type === 'email' || inp.tagName.toLowerCase() === 'textarea') inp.value = '';
                else if (inp.type === 'hidden') return;
                else inp.value = '';
              });

              // restore button
              setButtonState(originalText, originalStyle.background, originalStyle.color);
              submitBtn.disabled = false;
            }, 2000);
          } else {
            // error
            setButtonState('Error sending', '#dc3545', '#fff');
            setTimeout(() => {
              setButtonState(originalText, originalStyle.background, originalStyle.color);
              submitBtn.disabled = false;
            }, 2000);
          }
        } catch (err) {
          // network error
          setButtonState('Network error', '#dc3545', '#fff');
          setTimeout(() => {
            setButtonState(originalText, originalStyle.background, originalStyle.color);
            submitBtn.disabled = false;
          }, 2000);
        }
      });
    })();
  </script>
</body>
</html>
